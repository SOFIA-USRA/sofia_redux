<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>derasterize &#8212; sofia_redux v1.3.4.dev38+g92ea2f4</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=6aa39468"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="derive_tort" href="sofia_redux.instruments.exes.derive_tort.derive_tort.html" />
    <link rel="prev" title="debounce" href="sofia_redux.instruments.exes.debounce.debounce.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://irsa.ipac.caltech.edu/Missions/sofia.html"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.instruments.exes.derive_tort.derive_tort.html" title="derive_tort">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.instruments.exes.debounce.debounce.html" title="debounce">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev38+g92ea2f4</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/exes/developers/developers.html" accesskey="U">EXES Redux Developer’s Manual</a> &#187;</li>
      
      <li>derasterize</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="derasterize">
<h1>derasterize<a class="headerlink" href="#derasterize" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.instruments.exes.derasterize.derasterize">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.instruments.exes.derasterize.</span></span><span class="sig-name descname"><span class="pre">derasterize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/exes/derasterize.html#derasterize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.exes.derasterize.derasterize" title="Link to this definition">¶</a></dt>
<dd><p>Read and recombine a rasterized flat file.</p>
<p>When background fluxes are high, raster flats are taken in subarray
chunks to avoid saturating the detector.  These chunks are stored in
a custom format in the raw FITS file and need special handling to
be reassembled into a full-frame flat for use with the science data.</p>
<p>The procedure is:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Divide the input cube into detector stripes.</p></li>
<li><p>Call <code class="xref py py-obj docutils literal notranslate"><span class="pre">readraw</span></code> for each stripe to coadd raw readouts.</p></li>
<li><p>Use overlap regions to fit and correct for gain and offset
differences between stripes.</p></li>
<li><p>Assemble corrected stripes into a full 1024 x 1024 array.</p></li>
</ol>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>3D data cube [nframe, nspec, nspat].</p>
</dd>
<dt><strong>header</strong><span class="classifier">fits.Header</span></dt><dd><p>Header of FITS file. May be updated in place.</p>
</dd>
<dt><strong>dark_data</strong><span class="classifier">numpy.ndarray, optional</span></dt><dd><p>3D raw raster dark data [nframe, nspec, nspat].  Must match the
input data if provided.</p>
</dd>
<dt><strong>dark_header</strong><span class="classifier">fits.Header, optional</span></dt><dd><p>Header of dark FITS file.</p>
</dd>
<dt><strong>overlap</strong><span class="classifier">int, optional</span></dt><dd><p>The size of the overlap region in each detector stripe.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>deraster, variance, mask</strong><span class="classifier">3-tuple of numpy.ndarray</span></dt><dd><p>The derasterized and coadded data, variance, and good data mask.
The deraster and variance arrays have shape (nframes, ny, nx).
The mask has shape (ny, nx) and Boolean data type, where True
indicates a good pixel; False indicates a bad pixel.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">derasterize</a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.exes.derasterize.derasterize"><code class="docutils literal notranslate"><span class="pre">derasterize()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.instruments.exes.derasterize.derasterize.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2024, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.2.6. &nbsp;
    Last built 05 Feb 2024. <br/>
  </p>
</footer>
  </body>
</html>