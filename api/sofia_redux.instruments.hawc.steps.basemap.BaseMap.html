<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>BaseMap &#8212; sofia_redux v1.3.4.dev38+g92ea2f4</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=6aa39468"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Channels" href="sofia_redux.scan.channels.channels.Channels.html" />
    <link rel="prev" title="clipped_mean" href="sofia_redux.instruments.hawc.steps.basehawc.clipped_mean.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://irsa.ipac.caltech.edu/Missions/sofia.html"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.scan.channels.channels.Channels.html" title="Channels">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.instruments.hawc.steps.basehawc.clipped_mean.html" title="clipped_mean">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev38+g92ea2f4</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/hawc/developers/developers.html" accesskey="U">HAWC+ DRP Developer’s Manual</a> &#187;</li>
      
      <li>BaseMap</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="basemap">
<h1>BaseMap<a class="headerlink" href="#basemap" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.basemap.BaseMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sofia_redux.instruments.hawc.steps.basemap.</span></span><span class="sig-name descname"><span class="pre">BaseMap</span></span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/basemap.html#BaseMap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Mapping utilities for pipeline steps.</p>
<p>This class is designed to be used as mix-in for any pipeline step
class that requires mapping functionality.  It is assumed that the
pipeline step will handle data input and output, as well as appropriate
parameters.</p>
<p class="rubric">Methods Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.addgap" title="sofia_redux.instruments.hawc.steps.basemap.BaseMap.addgap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addgap</span></code></a>(data, x, y)</p></td>
<td><p>Adjust x and y pixel coordinates for the gap between subarrays.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.checkvalid" title="sofia_redux.instruments.hawc.steps.basemap.BaseMap.checkvalid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">checkvalid</span></code></a>()</p></td>
<td><p>Check data consistency.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.getarg" title="sofia_redux.instruments.hawc.steps.basemap.BaseMap.getarg"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getarg</span></code></a>(parname)</p></td>
<td><p>Get input parameter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.make_resample_map" title="sofia_redux.instruments.hawc.steps.basemap.BaseMap.make_resample_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_resample_map</span></code></a>(cdelt)</p></td>
<td><p>Construct map parameters from input data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.read_resample_data" title="sofia_redux.instruments.hawc.steps.basemap.BaseMap.read_resample_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_resample_data</span></code></a>(maxgoodpix)</p></td>
<td><p>Read data from input images.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.sumexptime" title="sofia_redux.instruments.hawc.steps.basemap.BaseMap.sumexptime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sumexptime</span></code></a>()</p></td>
<td><p>Sum exposure time over input data.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.basemap.BaseMap.addgap">
<span class="sig-name descname"><span class="pre">addgap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/basemap.html#BaseMap.addgap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.addgap" title="Link to this definition">¶</a></dt>
<dd><p>Adjust x and y pixel coordinates for the gap between subarrays.</p>
<p>Header keywords ALNGAPX, ALNGAPY, and ALNROTA are used to
determine the gap parameters.  The x and y arrays are updated
in place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">DataFits</span></dt><dd><p>Input data to adjust</p>
</dd>
<dt><strong>x</strong><span class="classifier">array-like</span></dt><dd><p>X coordinates for the input image.  Must be
2-dimensional (nrow x ncol).</p>
</dd>
<dt><strong>y</strong><span class="classifier">array-like</span></dt><dd><p>Y coordinates for the input image.  Must be
2-dimensional (nrow x ncol).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.basemap.BaseMap.checkvalid">
<span class="sig-name descname"><span class="pre">checkvalid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/basemap.html#BaseMap.checkvalid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.checkvalid" title="Link to this definition">¶</a></dt>
<dd><p>Check data consistency.</p>
<p>All input data are checked to make sure that SPECTEL1
and the number of HWP angles are the same across all input
files.  The number of HWP angles found is set as self.nhwp.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.basemap.BaseMap.getarg">
<span class="sig-name descname"><span class="pre">getarg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/basemap.html#BaseMap.getarg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.getarg" title="Link to this definition">¶</a></dt>
<dd><p>Get input parameter.</p>
<p>This should be implemented by the pipeline step.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.basemap.BaseMap.make_resample_map">
<span class="sig-name descname"><span class="pre">make_resample_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cdelt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/basemap.html#BaseMap.make_resample_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.make_resample_map" title="Link to this definition">¶</a></dt>
<dd><p>Construct map parameters from input data.</p>
<p>The coordinate grid for the map is determined from the
range of the RA and Dec coordinates in the input data.
The grid and associated reference values are stored in
self.pmap, for use by the resampling algorithm.  A draft
header containing appropriate WCS information for the output
map is stored in self.allhead.</p>
<p>The ‘proj’ parameter is used to set the projection type
in the output header.  The ‘sizelimit’ argument is tested
against, to determine if the output map is too large.  This
error case is most likely due to inappropriately grouped
input files.  These parameters must be defined by the pipeline
step inheriting from this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cdelt</strong><span class="classifier">float</span></dt><dd><p>The pixel scale for the output map, in arcsec.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.basemap.BaseMap.read_resample_data">
<span class="sig-name descname"><span class="pre">read_resample_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxgoodpix</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/basemap.html#BaseMap.read_resample_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.read_resample_data" title="Link to this definition">¶</a></dt>
<dd><p>Read data from input images.</p>
<p>This function ingests the data from self.datain, storing in
the self.pdata list of dictionaries.  Keys for each data
dictionary are as follows; values are flattened arrays
corresponding to good pixels only.</p>
<blockquote>
<div><ul class="simple">
<li><p>mask: bad pixel mask values</p></li>
<li><p>ra: RA coordinates</p></li>
<li><p>dec: Dec coordinates</p></li>
<li><p>I: Stokes I flux values</p></li>
<li><p>dI: Stokes I error values</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>The following additional keys are present only if self.nhwp &gt; 1:</dt><dd><ul class="simple">
<li><p>Q: Stokes Q flux values</p></li>
<li><p>dQ: Stokes Q error values</p></li>
<li><p>U: Stokes U flux values</p></li>
<li><p>dU: Stokes U error values</p></li>
<li><p>QIcov: Q-I covariance values</p></li>
<li><p>UIcov: U-I covariance values</p></li>
<li><p>QUcov: Q-U covariance values</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>maxgoodpix</strong><span class="classifier">int</span></dt><dd><p>The maximum mask value to be considered good. If maxgoodpix=0,
only good pixels present in both R and T arrays are used for
stokes I. If maxgoodpix=2, widow pixels are also used for
stokes I.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.instruments.hawc.steps.basemap.BaseMap.sumexptime">
<span class="sig-name descname"><span class="pre">sumexptime</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/instruments/hawc/steps/basemap.html#BaseMap.sumexptime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.sumexptime" title="Link to this definition">¶</a></dt>
<dd><p>Sum exposure time over input data.</p>
<p>The EXPTIME keyword in self.dataout is set to the summed value
as the total exposure time on-source.</p>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">BaseMap</a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap"><code class="docutils literal notranslate"><span class="pre">BaseMap</span></code></a><ul>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.addgap"><code class="docutils literal notranslate"><span class="pre">BaseMap.addgap()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.checkvalid"><code class="docutils literal notranslate"><span class="pre">BaseMap.checkvalid()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.getarg"><code class="docutils literal notranslate"><span class="pre">BaseMap.getarg()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.make_resample_map"><code class="docutils literal notranslate"><span class="pre">BaseMap.make_resample_map()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.read_resample_data"><code class="docutils literal notranslate"><span class="pre">BaseMap.read_resample_data()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.instruments.hawc.steps.basemap.BaseMap.sumexptime"><code class="docutils literal notranslate"><span class="pre">BaseMap.sumexptime()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.instruments.hawc.steps.basemap.BaseMap.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2024, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.2.6. &nbsp;
    Last built 05 Feb 2024. <br/>
  </p>
</footer>
  </body>
</html>