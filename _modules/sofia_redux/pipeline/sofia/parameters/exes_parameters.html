<!DOCTYPE html>

<html lang="en" data-content_root="../../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sofia_redux.pipeline.sofia.parameters.exes_parameters &#8212; sofia_redux v1.3.4.dev38+g92ea2f4</title>
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/plot_directive.css" />
    
    <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../../../_static/documentation_options.js?v=6aa39468"></script>
    <script src="../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../../../../../_static/sidebar.js"></script>
    <script type="text/javascript" src="../../../../../_static/copybutton.js"></script>
    <link rel="icon" href="../../../../../_static/redux.ico"/>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../../../../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://irsa.ipac.caltech.edu/Missions/sofia.html"></a></li>
    <li><a title="General Index" href="../../../../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../../../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../../../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="../../../../../index.html">sofia_redux v1.3.4.dev38+g92ea2f4</a>
	 &#187;
      </li>
      <li><a href="../../../../index.html" accesskey="U">Module code</a> &#187;</li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sofia_redux.pipeline.sofia.parameters.exes_parameters</h1><div class="highlight"><pre>
<span></span># Licensed under a 3-clause BSD style license - see LICENSE.rst
&quot;&quot;&quot;EXES parameter sets.&quot;&quot;&quot;

from copy import deepcopy
from sofia_redux.pipeline.parameters import Parameters

__all__ = [&#39;EXESParameters&#39;]


# Store default values for all parameters here.
EXES_DEFAULT = {
    &#39;load_data&#39;: [
        {&#39;key&#39;: &#39;abort&#39;,
         &#39;name&#39;: &#39;Abort reduction for invalid headers&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the reduction will be &#39;
                        &#39;aborted if the input headers &#39;
                        &#39;do not meet requirements&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;sky_spec&#39;,
         &#39;name&#39;: &#39;Extract sky spectrum&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Set to extract a sky spectrum&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;
         },
        {&#39;key&#39;: &#39;cent_wave&#39;,
         &#39;name&#39;: &#39;Central wavenumber&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;If the wavenumber is known more precisely than the \n&#39;
                        &#39;value in the WAVENO0 key- word, enter it here to \n&#39;
                        &#39;use it in the distortion correction calculations \n&#39;
                        &#39;and wavelength calibration.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;hrfl&#39;,
         &#39;name&#39;: &#39;HR focal length&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;This distortion parameter may be adjusted \n&#39;
                        &#39;to tune the dispersion solution for \n&#39;
                        &#39;cross-dispersed spectra.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;xdfl&#39;,
         &#39;name&#39;: &#39;XD focal length&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;This distortion parameter may be adjusted to \n&#39;
                        &#39;tune the dispersion solution for long-slit spectra.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;slit_rot&#39;,
         &#39;name&#39;: &#39;Slit rotation&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;This distortion parameter may be adjusted to tune \n&#39;
                        &#39;the slit skewing, to correct for spectral \n&#39;
                        &#39;features that appear tilted across an order.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;det_rot&#39;,
         &#39;name&#39;: &#39;Detector rotation&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Adjust the detector rotation.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;hrr&#39;,
         &#39;name&#39;: &#39;HRR&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Adjust the R number for the echelon grating&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;flattamb&#39;,
         &#39;name&#39;: &#39;Ambient temperature for the flat mirror&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Set to override the default ambient temperature &#39;
                        &#39;for the flat mirror. \n&#39;
                        &#39;Typical default is 290K.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;flatemis&#39;,
         &#39;name&#39;: &#39;Emissivity for the flat mirror&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Set to override the default emissivity fraction &#39;
                        &#39;for the flat mirror. \n&#39;
                        &#39;Typical default is 0.1.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;coadd_readouts&#39;: [
        {&#39;key&#39;: &#39;general_params&#39;,
         &#39;name&#39;: &#39;General Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save coadded readouts&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;algorithm&#39;,
         &#39;name&#39;: &#39;Readout algorithm&#39;,
         &#39;options&#39;: [&#39;Default for read mode&#39;,
                     &#39;Last destructive only&#39;,
                     &#39;First/last frame only&#39;,
                     &#39;Second/penultimate frame only&#39;],
         &#39;option_index&#39;: 1,
         &#39;description&#39;: &#39;Set the readout mode. The default is to determine &#39;
                        &#39;the best option from the readout pattern. \n&#39;
                        &#39;Last destructive will use a separate dark frame as &#39;
                        &#39;the reset frame. \nFirst/last will use the first &#39;
                        &#39;non-destructive read as the reset.\n &#39;
                        &#39;Second/penultimate will use the second read as the &#39;
                        &#39;reset and the second-to-last as the signal.&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;
         },
        {&#39;key&#39;: &#39;lin_corr&#39;,
         &#39;name&#39;: &#39;Apply linear correction&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Apply linear correction&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;
         },
        {&#39;key&#39;: &#39;fix_row_gains&#39;,
         &#39;name&#39;: &#39;Correct odd/even row gains&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Fit and remove gain offsets by odd/even row value.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;
         },
        {&#39;key&#39;: &#39;overlap&#39;,
         &#39;name&#39;: &#39;Overlapping rows in raster flat&#39;,
         &#39;value&#39;: 32,
         &#39;description&#39;: &#39;The number of overlapping rows in the raster &#39;
                        &#39;strips for flats&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;fit_buffer&#39;,
         &#39;name&#39;: &#39;Number of buffer pixels around overlap region&#39;,
         &#39;value&#39;: 5,
         &#39;description&#39;: &#39;The number of buffer rows around the overlap region &#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;int_params&#39;,
         &#39;name&#39;: &#39;Integration Handling Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;toss_int_sci&#39;,
         &#39;name&#39;: &#39;Science files: toss first integrations (0, 1, or 2)&#39;,
         &#39;value&#39;: 0,
         &#39;description&#39;: &#39;If set to 0, all integration sets will be used. \n&#39;
                        &#39;If set to 1 or 2, that many integrations will be \n&#39;
                        &#39;discarded from the beginning of the input &#39;
                        &#39;science files.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;toss_int_flat&#39;,
         &#39;name&#39;: &#39;Flat files: toss first integrations (0, 1, or 2)&#39;,
         &#39;value&#39;: 0,
         &#39;description&#39;: &#39;If set to 0, all integration sets will be used. \n&#39;
                        &#39;If set to 1 or 2, that many integrations will be \n&#39;
                        &#39;discarded from the beginning of the input &#39;
                        &#39;flat files.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;toss_int_dark&#39;,
         &#39;name&#39;: &#39;Dark files: toss first integrations (0, 1, or 2)&#39;,
         &#39;value&#39;: 0,
         &#39;description&#39;: &#39;If set to 0, all integration sets will be used. \n&#39;
                        &#39;If set to 1 or 2, that many integrations will be \n&#39;
                        &#39;discarded from the beginning of the input &#39;
                        &#39;dark files.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;copy_integrations&#39;,
         &#39;name&#39;: &#39;Copy integrations instead of tossing&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, &quot;tossed&quot; integrations will be replaced with&#39;
                        &#39;frames from the next B nod instead of discarded, &#39;
                        &#39;if possible.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;
         }
    ],
    &#39;make_flat&#39;: [
        {&#39;key&#39;: &#39;general_params&#39;,
         &#39;name&#39;: &#39;General Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;save_flat&#39;,
         &#39;name&#39;: &#39;Save flat as separate file&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save flat (FLT) file&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;order_params&#39;,
         &#39;name&#39;: &#39;Order Edge Determination Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Threshold factor (fraction)&#39;,
         &#39;value&#39;: 0.15,
         &#39;description&#39;: &#39;This value defines the illumination threshold &#39;
                        &#39;for a flat, which determines the edges &#39;
                        &#39;of cross-dispersed orders. \nEnter a &#39;
                        &#39;number between 0 and 1.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;opt_rot&#39;,
         &#39;name&#39;: &#39;Optimize rotation angle&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Unset to prevent the pipeline from &#39;
                        &#39;using a 2D FFT to determine the best rotation &#39;
                        &#39;angle (krot).&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;edge_method&#39;,
         &#39;name&#39;: &#39;Edge enhancement method&#39;,
         &#39;options&#39;: [&#39;Derivative&#39;, &#39;Squared derivative&#39;, &#39;Sobel&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Sets the algorithm for enhancing order edges &#39;
                        &#39;prior to FFT.&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;},
        {&#39;key&#39;: &#39;start_rot&#39;,
         &#39;name&#39;: &#39;Starting rotation angle&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Starting value for krot. \nIf not set, the &#39;
                        &#39;value will be taken from a default &#39;
                        &#39;value in configuration.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;predict_spacing&#39;,
         &#39;name&#39;: &#39;Predicted spacing&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Expected order spacing in pixels for cross-dispersed &#39;
                        &#39;orders. \nIf provided, it is used as a first &#39;
                        &#39;guess for the spacing parameter, overriding the &#39;
                        &#39;calculated value.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;order_override_params&#39;,
         &#39;name&#39;: &#39;Order Edge Override Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;bottom_pix&#39;,
         &#39;name&#39;: &#39;Bottom pixel for undistorted order (Med/Low)&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Directly set the bottom edge of the order &#39;
                        &#39;to this value (medium and low modes only).&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;top_pix&#39;,
         &#39;name&#39;: &#39;Top pixel for undistorted order (Med/Low)&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Directly set the top edge of the order &#39;
                        &#39;to this value (medium and low modes only).&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;start_pix&#39;,
         &#39;name&#39;: &#39;Starting pixel for undistorted order&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Directly set the left edge of all orders &#39;
                        &#39;to this value.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;end_pix&#39;,
         &#39;name&#39;: &#39;Ending pixel for undistorted order&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Directly set the right edge of all orders &#39;
                        &#39;to this value.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;custom_wavemap&#39;,
         &#39;name&#39;: &#39;Custom cross-dispersed order mask&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;This file should contain bottom, &#39;
                        &#39;top, start, and end edges to set &#39;
                        &#39;in the output order mask for cross-dispersed modes. &#39;
                        &#39;\nOne line for each order with &#39;
                        &#39;edge values specified as white-space separated &#39;
                        &#39;integers (B T S E), starting with the top-most &#39;
                        &#39;order (largest B/T). \nValues are post-distortion &#39;
                        &#39;correction and rotation, so that B/T are y values &#39;
                        &#39;and S/E are x values, zero-indexed.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
    ],
    &#39;despike&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save generated files&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;combine_all&#39;,
         &#39;name&#39;: &#39;Combine all files before despike&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, all frames will be combined into a single &#39;
                        &#39;file before continuing processing.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;ignore_beams&#39;,
         &#39;name&#39;: &#39;Ignore beam designation&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, all frames will be compared, &#39;
                        &#39;including A and B nods.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;spike_fac&#39;,
         &#39;name&#39;: &#39;Spike factor (sigma)&#39;,
         &#39;value&#39;: 20.0,
         &#39;description&#39;: &#39;Enter a value for the threshold for a pixel to be &#39;
                        &#39;considered a spike.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;mark_trash&#39;,
         &#39;name&#39;: &#39;Mark trashed frames for exclusion&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If checked, frames with more &#39;
                        &#39;noise than the rest will be identified and &#39;
                        &#39;excluded from future processing.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;propagate_nan&#39;,
         &#39;name&#39;: &#39;Propagate NaN values&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, spikes will be set to NaN. \n&#39;
                        &#39;Otherwise, spikes will be replaced with &#39;
                        &#39;average values.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
    ],
    &#39;debounce&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;bounce_fac&#39;,
         &#39;name&#39;: &#39;Bounce factor&#39;,
         &#39;value&#39;: 0.0,
         &#39;description&#39;: &#39;Enter a number to use as the amplitude of &#39;
                        &#39;the bounce correction. \nA value of 0 means &#39;
                        &#39;no bounce correction will be applied. \n&#39;
                        &#39;Values greater than 0 apply the first &#39;
                        &#39;derivative bounce (shifting) only. \nValues &#39;
                        &#39;less than 0 also apply the second derivative &#39;
                        &#39;bounce (smoothing). \nTypical nonzero values &#39;
                        &#39;are 0.1 or -0.1.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;
         },
        {&#39;key&#39;: &#39;spec_direction&#39;,
         &#39;name&#39;: &#39;Spectral direction&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, the bounce correction will be &#39;
                        &#39;applied in the spectral direction instead &#39;
                        &#39;of the spatial direction.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;
         }
    ],
    &#39;subtract_nods&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save generated files&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;skip_nod&#39;,
         &#39;name&#39;: &#39;Skip nod subtraction&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, no nod subtraction is performed.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;subtract_sky&#39;,
         &#39;name&#39;: &#39;Subtract residual sky (nod-off-slit only)&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, residual sky signal is removed before &#39;
                        &#39;subtracting pairs&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;subtract_dark&#39;,
         &#39;name&#39;: &#39;Dark subtraction&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, a dark frame will be &#39;
                        &#39;subtracted from all planes instead of &#39;
                        &#39;subtracting nods.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;}
    ],
    &#39;flat_correct&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;skip_flat&#39;,
         &#39;name&#39;: &#39;Skip flat correction&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, the data will not be multiplied &#39;
                        &#39;by the flat.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;}
    ],
    &#39;clean_badpix&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;bp_threshold&#39;,
         &#39;name&#39;: &#39;Bad pixel threshold&#39;,
         &#39;value&#39;: 20.0,
         &#39;description&#39;: &#39;Threshold for a pixel to be considered a bad pixel. &#39;
                        &#39;\nThis value is multiplied by the standard deviation &#39;
                        &#39;of all good pixels in the frame.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;propagate_nan&#39;,
         &#39;name&#39;: &#39;Propagate NaN values&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, bad pixels will be set to NaN. \n&#39;
                        &#39;Otherwise, bad pixels will be interpolated over.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
    ],
    &#39;undistort&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;interpolation_method&#39;,
         &#39;name&#39;: &#39;Interpolation method&#39;,
         &#39;options&#39;: [&#39;Piecewise spline&#39;, &#39;Cubic convolution&#39;],
         &#39;option_index&#39;: 1,
         &#39;description&#39;: &#39;Choose spline interpolation with specified order &#39;
                        &#39;or parametric cubic convolution. \n&#39;
                        &#39;Cubic convolution replicates the behavior in the &#39;
                        &#39;original IDL pipeline.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;},
        {&#39;key&#39;: &#39;spline_order&#39;,
         &#39;name&#39;: &#39;Spline order&#39;,
         &#39;value&#39;: 3,
         &#39;description&#39;: &#39;Can be 0-5. Ignored if interpolation method is &#39;
                        &#39;cubic convolution.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;block_unilluminated&#39;,
         &#39;name&#39;: &#39;Set unilluminated pixels to NaN&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, unilluminated regions will be set to NaN.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
    ],
    &#39;correct_calibration&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;skip_correction&#39;,
         &#39;name&#39;: &#39;Skip calibration correction&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, no calibration correction will be performed.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
    ],
    &#39;coadd_pairs&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;save_intermediate&#39;,
         &#39;name&#39;: &#39;Save modified frames before coadd&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, input frames that have been optionally &#39;
                        &#39;sky-subtracted or shifted will be saved to disk &#39;
                        &#39;for inspection.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;subtract_sky&#39;,
         &#39;name&#39;: &#39;Subtract residual sky (nod-on-slit only)&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If checked, the mean value at each &#39;
                        &#39;wavelength bin will be subtracted to remove &#39;
                        &#39;any residual sky noise.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;shift&#39;,
         &#39;name&#39;: &#39;Shift before coadd&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Set to attempt to shift spectra in the &#39;
                        &#39;spatial direction to align with each other &#39;
                        &#39;before coadding.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;shift_method&#39;,
         &#39;name&#39;: &#39;Shift method&#39;,
         &#39;options&#39;: [&#39;Maximize signal-to-noise&#39;, &#39;Maximize signal (sharpen)&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select whether to maximize the signal &#39;
                        &#39;or the signal-to-noise when determining the &#39;
                        &#39;spatial shift.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;},
        {&#39;key&#39;: &#39;skip_coadd&#39;,
         &#39;name&#39;: &#39;Skip coadd&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, coadd is skipped and all input frames are &#39;
                        &#39;treated as separate files.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;coadd_all_files&#39;,
         &#39;name&#39;: &#39;Coadd all files&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, all input files will be &#39;
                        &#39;coadded together, as if they were in a single file.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;exclude_pairs&#39;,
         &#39;name&#39;: &#39;Exclude pairs&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Enter comma-separated numbers to &#39;
                        &#39;identify specific nod-subtracted frames to &#39;
                        &#39;exclude from the coadd. \n&#39;
                        &#39;Separate lists for multiple files with a semi-colon.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Robust threshold&#39;,
         &#39;value&#39;: 8.0,
         &#39;description&#39;: &#39;Set to a number greater than zero to enable&#39;
                        &#39;outlier rejection before coadding. \nSpecified &#39;
                        &#39;as a factor times the standard deviation in &#39;
                        &#39;the data.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;weight_method&#39;,
         &#39;name&#39;: &#39;Weighting method&#39;,
         &#39;options&#39;: [&#39;Uniform weights&#39;, &#39;Weight by flat&#39;,
                     &#39;Weight by variance&#39;],
         &#39;option_index&#39;: 1,
         &#39;description&#39;: &#39;If not set to uniform weights, this step will &#39;
                        &#39;weight nod pairs by their correlation with a &#39;
                        &#39;spatial template. \nEither the flat or the &#39;
                        &#39;variance on the flux can be used to weight the &#39;
                        &#39;template average.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;},
        {&#39;key&#39;: &#39;override_weights&#39;,
         &#39;name&#39;: &#39;Override weights&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Enter comma-separated numbers to directly &#39;
                        &#39;specify weight values for each input frame. \n&#39;
                        &#39;Separate lists for multiple files with a semi-colon.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;convert_units&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;skip_conversion&#39;,
         &#39;name&#39;: &#39;Skip unit conversion&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, no unit conversion will be performed.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;cal_factor&#39;,
         &#39;name&#39;: &#39;Additional calibration scaling&#39;,
         &#39;value&#39;: 1.0,
         &#39;description&#39;: &#39;If provided, this factor is multiplied &#39;
                        &#39;into all flux extensions, \n&#39;
                        &#39;for additional a priori calibration correction &#39;
                        &#39;to the flux scale.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;zero_level&#39;,
         &#39;name&#39;: &#39;Additional calibration offset&#39;,
         &#39;value&#39;: 0.0,
         &#39;description&#39;: &#39;If provided, this factor is added &#39;
                        &#39;into all flux extensions, \n&#39;
                        &#39;for additional a priori calibration correction &#39;
                        &#39;to the zero level.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;make_profiles&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;fit_order&#39;,
         &#39;name&#39;: &#39;Row fit order&#39;,
         &#39;value&#39;: 4,
         &#39;description&#39;: &#39;Polynomial fit order for rows &#39;
                        &#39;(along spectral dimension).&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;bg_sub&#39;,
         &#39;name&#39;: &#39;Subtract median background&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the median value along columns will &#39;
                        &#39;be subtracted from the profile.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
    ],
    &#39;locate_apertures&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Aperture location method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;auto&#39;, &#39;fix to input&#39;, &#39;fix to center&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the aperture location method.&#39;},
        {&#39;key&#39;: &#39;num_aps&#39;,
         &#39;name&#39;: &#39;Number of auto apertures&#39;,
         &#39;value&#39;: 1,
         &#39;description&#39;: &#39;Number of apertures to look for &#39;
                        &#39;if aperture is not fixed&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;input_position&#39;,
         &#39;name&#39;: &#39;Aperture position&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Starting position(s) for aperture detection, &#39;
                        &#39;comma-separated for apertures, semi-colon &#39;
                        &#39;separated for files.\n&#39;
                        &#39;If method is &quot;fix to input&quot;, will be used &#39;
                        &#39;directly.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;fwhm&#39;,
         &#39;name&#39;: &#39;Expected aperture FWHM (arcsec)&#39;,
         &#39;value&#39;: 3.0,
         &#39;description&#39;: &#39;Gaussian FWHM estimate for fit to profile.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;exclude_orders&#39;,
         &#39;name&#39;: &#39;Exclude orders&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Enter comma-separated numbers to &#39;
                        &#39;identify specific orders to exclude from &#39;
                        &#39;spectral extraction.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;}
    ],
    &#39;set_apertures&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;full_slit&#39;,
         &#39;name&#39;: &#39;Extract the full slit&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, all other parameters will be ignored.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;refit&#39;,
         &#39;name&#39;: &#39;Refit apertures for FWHM&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the peak position will be fit &#39;
                        &#39;with a Gaussian to determine the aperture &#39;
                        &#39;radii. \nIf not, the assumed value will &#39;
                        &#39;be used.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;apsign&#39;,
         &#39;name&#39;: &#39;Aperture sign&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;If specified, will be used directly. \nSeparate &#39;
                        &#39;files with semi-colon, apertures with comma.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;aprad&#39;,
         &#39;name&#39;: &#39;Aperture radius&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;If specified, will be used directly. Separate &#39;
                        &#39;files with semi-colon, apertures with comma.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;psfrad&#39;,
         &#39;name&#39;: &#39;PSF radius&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;If specified, will be used directly. Separate &#39;
                        &#39;files with semi-colon, apertures with comma.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;bgr&#39;,
         &#39;name&#39;: &#39;Background regions&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;If specified, will be used directly. Separate &#39;
                        &#39;files with semi-colon, regions with comma, &#39;
                        &#39;start and stop with dash.  \n &#39;
                        &#39;Leave blank to calculate automatically; set to &#39;
                        &#39;None to leave out.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;ap_start&#39;,
         &#39;name&#39;: &#39;Override aperture start&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Set the aperture start. Values should be &#39;
                        &#39;given in arcseconds across the slit. \n&#39;
                        &#39;Separate multiple apertures by commas; &#39;
                        &#39;separate values for multiple files by semi-colons.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;ap_end&#39;,
         &#39;name&#39;: &#39;Override aperture end&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Set the aperture end. Values should be &#39;
                        &#39;given in arcseconds across the slit. \n&#39;
                        &#39;Separate multiple apertures by commas; &#39;
                        &#39;separate values for multiple files by semi-colons.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;subtract_background&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;skip_bg&#39;,
         &#39;name&#39;: &#39;Skip background subtraction&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Set to skip subtracting background.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;bg_fit_order&#39;,
         &#39;name&#39;: &#39;Background fit order&#39;,
         &#39;value&#39;: 0,
         &#39;description&#39;: &#39;Polynomial fit order for background level.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Bad pixel threshold (sigma)&#39;,
         &#39;value&#39;: 4.0,
         &#39;description&#39;: &#39;Specify the number of sigma to use in &#39;
                        &#39;for rejecting bad pixels in the fit.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;extract_spectra&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;save_1d&#39;,
         &#39;name&#39;: &#39;Save extracted 1D spectra&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save spectra to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Extraction method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;optimal&#39;, &#39;standard&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the extraction method.&#39;},
        {&#39;key&#39;: &#39;use_profile&#39;,
         &#39;name&#39;: &#39;Use median profile instead of spatial map&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, the average profile will be used to &#39;
                        &#39;scale all wavelengths.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;fix_bad&#39;,
         &#39;name&#39;: &#39;Use spatial profile to fix bad pixels&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, bad pixels are replaced in the spectral &#39;
                        &#39;image.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Bad pixel threshold (sigma)&#39;,
         &#39;value&#39;: 5.0,
         &#39;description&#39;: &#39;Specify the number of sigma to use in &#39;
                        &#39;sigma clip for robust algorithms.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;atrandir&#39;,
         &#39;name&#39;: &#39;Transmission directory&#39;,
         &#39;value&#39;: &#39;$DPS_SHARE/calibrations/PSG/fits&#39;,
         &#39;description&#39;: &#39;Directory containing transmission data. \n&#39;
                        &#39;Ignored if model file is specified.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_directory&#39;},
        {&#39;key&#39;: &#39;atranfile&#39;,
         &#39;name&#39;: &#39;Transmission model file (PSG)&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing atmospheric transmission data.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
    ],
    &#39;combine_spectra&#39;: [
        {&#39;key&#39;: &#39;general_params&#39;,
         &#39;name&#39;: &#39;General Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Combination method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;mean&#39;, &#39;median&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the combination method.&#39;},
        {&#39;key&#39;: &#39;weighted&#39;,
         &#39;name&#39;: &#39;Weight by errors&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, flux values are inversely weighted &#39;
                        &#39;by the error values before combination. &#39;
                        &#39;Ignored for method=median.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;combination_params&#39;,
         &#39;name&#39;: &#39;1-2D Combination Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;combine_aps&#39;,
         &#39;name&#39;: &#39;Combine apertures&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, apertures will be combined.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;robust&#39;,
         &#39;name&#39;: &#39;Robust combination&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, data will be sigma-clipped &#39;
                        &#39;before combination&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Outlier rejection threshold (sigma)&#39;,
         &#39;value&#39;: 8.0,
         &#39;description&#39;: &#39;Specify the number of sigma to use in &#39;
                        &#39;sigma clip for robust algorithms.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;maxiters&#39;,
         &#39;name&#39;: &#39;Maximum sigma-clipping iterations&#39;,
         &#39;value&#39;: 5,
         &#39;description&#39;: &#39;Specify the maximum number of outlier &#39;
                        &#39;rejection iterations to use if robust=True.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;refine_wavecal&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;interactive&#39;,
         &#39;name&#39;: &#39;Select line interactively&#39;,
         &#39;hidden&#39;: True,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If unchecked, no wavelength calibration &#39;
                        &#39;refinement will be done. If checked, a &#39;
                        &#39;GUI window will pop up, allowing selection &#39;
                        &#39;and editing of a spectral feature.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;identify_order&#39;,
         &#39;name&#39;: &#39;Order number for identified line&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Enter the order number of the line to identify.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;identify_line&#39;,
         &#39;name&#39;: &#39;Identify line (pixel position)&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Enter the pixel position of the spectral &#39;
                        &#39;line to identify.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;identify_waveno&#39;,
         &#39;name&#39;: &#39;Identify wavenumber&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Enter the calibrated wavenumber for the &#39;
                        &#39;identified line.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;merge_orders&#39;: [
        {&#39;key&#39;: &#39;general_params&#39;,
         &#39;name&#39;: &#39;General Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;trim_params&#39;,
         &#39;name&#39;: &#39;Trimming Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;trim&#39;,
         &#39;name&#39;: &#39;Interactive trim before merge&#39;,
         &#39;hidden&#39;: True,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, the spectra from each order &#39;
                        &#39;can be interactively trimmed before merging.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;trim_regions&#39;,
         &#39;name&#39;: &#39;Regions to trim before merge&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Specified regions will be set to NaN before &#39;
                        &#39;merging. \nSpecify as semi-colon separated lists &#39;
                        &#39;of order number : wavenumber regions. \n&#39;
                        &#39;For example, &quot;1:780-785,786-787;2:801.5-802.3&quot; will &#39;
                        &#39;trim 2 regions from order 1 and 1 region from &#39;
                        &#39;order 2.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;merge_params&#39;,
         &#39;name&#39;: &#39;Merging Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Selection threshold (fraction of S/N)&#39;,
         &#39;value&#39;: 0.10,
         &#39;description&#39;: &#39;Pixels are used if their signal-to-noise ratio is &#39;
                        &#39;greater than this value times the median \n&#39;
                        &#39;signal-to-noise in the order. Set &lt;= 0 to turn off.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;statistic&#39;,
         &#39;name&#39;: &#39;S/N statistic to compare&#39;,
         &#39;options&#39;: [&#39;median&#39;, &#39;mean&#39;, &#39;max&#39;],
         &#39;option_index&#39;: 2,
         &#39;description&#39;: &#39;S/N threshold refers to values above this statistic, &#39;
                        &#39;for each order.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;},
        {&#39;key&#39;: &#39;noise_test&#39;,
         &#39;name&#39;: &#39;Apply selection threshold to noise only&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Use 1/noise for the S/N check, ignoring &#39;
                        &#39;signal values.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;local_noise&#39;,
         &#39;name&#39;: &#39;Use local standard deviation for noise thresholding&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, the input error spectrum is ignored for &#39;
                        &#39;the S/N thresholding.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;local_radius&#39;,
         &#39;name&#39;: &#39;Radius for local standard deviation (pixels)&#39;,
         &#39;value&#39;: 5,
         &#39;description&#39;: &#39;Sets the window for the noise calculation if &#39;
                        &#39;local noise is desired.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;specmap&#39;: [
        {&#39;key&#39;: &#39;normalize&#39;,
         &#39;name&#39;: &#39;Normalize spectrum before plotting&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the spectrum will be divided by &#39;
                        &#39;its median value.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;scale&#39;,
         &#39;name&#39;: &#39;Flux scale for plot&#39;,
         &#39;value&#39;: [0, 100],
         &#39;description&#39;: &#39;Specify a low and high percentile value for &#39;
                        &#39;the image scale, e.g. [0,99].&#39;,
         &#39;dtype&#39;: &#39;floatlist&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;ignore_outer&#39;,
         &#39;name&#39;: &#39;Fraction of outer wavelengths to ignore&#39;,
         &#39;value&#39;: 0.0,
         &#39;description&#39;: &#39;Used to block edge effects for noisy &#39;
                        &#39;spectral orders. \n&#39;
                        &#39;Set to 0 to include all wavelengths in the plot.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;atran_plot&#39;,
         &#39;name&#39;: &#39;Overplot transmission&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the atmospheric transmission spectrum will\n &#39;
                        &#39;be displayed in the spectral plot.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;error_plot&#39;,
         &#39;name&#39;: &#39;Overplot error range&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the error range will\n &#39;
                        &#39;be overlaid on the spectral plot.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;colormap&#39;,
         &#39;name&#39;: &#39;Color map&#39;,
         &#39;value&#39;: &#39;plasma&#39;,
         &#39;description&#39;: &#39;Matplotlib color map name.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;overplot_color&#39;,
         &#39;name&#39;: &#39;Overplot color&#39;,
         &#39;value&#39;: &#39;gray&#39;,
         &#39;description&#39;: &#39;Matplotlib color name.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;watermark&#39;,
         &#39;name&#39;: &#39;Watermark text&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Text to add to image as a watermark.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
}


<div class="viewcode-block" id="EXESParameters">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters">[docs]</a>
class EXESParameters(Parameters):
    &quot;&quot;&quot;Reduction parameters for the EXES pipeline.&quot;&quot;&quot;

    def __init__(self, default=None, base_header=None):
        &quot;&quot;&quot;
        Initialize parameters with default values.
        &quot;&quot;&quot;
        if default is None:
            default = EXES_DEFAULT.copy()
        super().__init__(default=default)

        self.base_header = base_header
        self.sky_spec_set = self.is_sky_spec()

<div class="viewcode-block" id="EXESParameters.copy">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.copy">[docs]</a>
    def copy(self):
        &quot;&quot;&quot;
        Return a copy of the parameters.

        Overrides default copy to add in configuration attributes.

        Returns
        -------
        Parameters
        &quot;&quot;&quot;
        new = super().copy()
        new.base_header = deepcopy(self.base_header)
        new.sky_spec_set = self.sky_spec_set
        return new</div>


<div class="viewcode-block" id="EXESParameters.unfittable">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.unfittable">[docs]</a>
    def unfittable(self):
        &quot;&quot;&quot;
        Determine if the observation mode is unfittable.

        &quot;Fittable&quot; modes are compact sources, with spatial size
        significantly less than the slit height. Unfittable modes
        are those for which the SRCTYPE is extended, INSTMODE is
        map, or INSTCFG is high-low and INSTMODE is not nod-on-slit.

        Returns
        -------
        bool
            True if data is not a compact, fittable observation mode;
            False otherwise.
        &quot;&quot;&quot;
        test = False
        if self.base_header is not None:
            srctype = str(self.base_header.get(&#39;SRCTYPE&#39;)).lower()
            instcfg = str(self.base_header.get(&#39;INSTCFG&#39;)).lower()
            instmode = str(self.base_header.get(&#39;INSTMODE&#39;)).lower()
            test = ((&#39;extended&#39; in srctype)
                    or (&#39;map&#39; in instmode)
                    or ((&#39;high_low&#39; in instcfg)
                        and (&#39;on_slit&#39; not in instmode)))
        return test</div>


<div class="viewcode-block" id="EXESParameters.is_sky_spec">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.is_sky_spec">[docs]</a>
    def is_sky_spec(self):
        &quot;&quot;&quot;
        Determine if the reduction should be considered a sky spectrum.

        Tests for the value of the SKYSPEC keyword in the base_header
        attribute.

        Returns
        -------
        bool
            True if SKYSPEC is True, False otherwise.
        &quot;&quot;&quot;
        test = False
        if self.base_header is not None:
            test = self.base_header.get(&#39;SKYSPEC&#39;, False)
        return test</div>


<div class="viewcode-block" id="EXESParameters.load_data">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.load_data">[docs]</a>
    def load_data(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the load data step.

        Sets sky spectrum defaults if indicated in the base header.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.base_header is not None:
            self.current[step_index].set_value(&#39;sky_spec&#39;, self.is_sky_spec())</div>


<div class="viewcode-block" id="EXESParameters.subtract_nods">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.subtract_nods">[docs]</a>
    def subtract_nods(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the nod subtraction step.

        Sets default to subtract dark if sky spectrum is indicated.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.base_header is not None:
            if self.is_sky_spec():
                self.current[step_index].set_value(&#39;subtract_dark&#39;, True)
            else:
                self.current[step_index].set_value(&#39;subtract_dark&#39;, False)</div>


<div class="viewcode-block" id="EXESParameters.coadd_pairs">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.coadd_pairs">[docs]</a>
    def coadd_pairs(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the coadd pairs step.

        Turns off coadd by default for INSTMODE = MAP.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.base_header is not None:
            # turn off coadd for mapping mode
            instmode = str(self.base_header.get(&#39;INSTMODE&#39;)).lower()
            if &#39;map&#39; in instmode:  # pragma: no cover
                self.current[step_index].set_value(&#39;skip_coadd&#39;, True)</div>


<div class="viewcode-block" id="EXESParameters.make_profiles">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.make_profiles">[docs]</a>
    def make_profiles(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the profile step.

        Sets default background subtraction option according to
        observation mode.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.base_header is not None:
            # set background subtraction to false for extended sources
            # and short slits and sky spectra
            if self.unfittable() or self.is_sky_spec():
                self.current[step_index].set_value(&#39;bg_sub&#39;, False)
            else:
                # restore to default value
                restore = self.default[&#39;make_profiles&#39;].get_value(&#39;bg_sub&#39;)
                self.current[step_index].set_value(&#39;bg_sub&#39;, restore)</div>


<div class="viewcode-block" id="EXESParameters.locate_apertures">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.locate_apertures">[docs]</a>
    def locate_apertures(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the aperture location step.

        Sets defaults according to observation parameters in
        base header.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.base_header is not None:
            # set detection method: fix to center for high-low
            # and extended, otherwise auto
            if self.unfittable() or self.is_sky_spec():
                self.current[step_index].set_value(&#39;method&#39;, &#39;fix to center&#39;)
            else:
                restore = self.default[&#39;locate_apertures&#39;].get_value(&#39;method&#39;)
                self.current[step_index].set_value(&#39;method&#39;, restore)

                # set 2 aps by default for nod-on-slit
                instmode = str(self.base_header.get(&#39;INSTMODE&#39;)).lower()
                if &#39;on_slit&#39; in instmode:
                    self.current[step_index].set_value(&#39;num_aps&#39;, 2)</div>


<div class="viewcode-block" id="EXESParameters.set_apertures">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.set_apertures">[docs]</a>
    def set_apertures(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the aperture setting step.

        Sets defaults according to observation parameters in
        base header.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.base_header is not None:
            # set to full slit for extended or high-low
            if self.unfittable() or self.is_sky_spec():
                self.current[step_index].set_value(&#39;full_slit&#39;, True)
            else:
                self.current[step_index].set_value(&#39;full_slit&#39;, False)</div>


<div class="viewcode-block" id="EXESParameters.subtract_background">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.subtract_background">[docs]</a>
    def subtract_background(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the background subtraction step.

        Sets defaults according to observation parameters in
        base header.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.base_header is not None:
            if self.unfittable() or self.is_sky_spec():
                self.current[step_index].set_value(&#39;skip_bg&#39;, True)
            else:
                restore = self.default[
                    &#39;subtract_background&#39;].get_value(&#39;skip_bg&#39;)
                self.current[step_index].set_value(&#39;skip_bg&#39;, restore)</div>


<div class="viewcode-block" id="EXESParameters.extract_spectra">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.html#sofia_redux.pipeline.sofia.parameters.exes_parameters.EXESParameters.extract_spectra">[docs]</a>
    def extract_spectra(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the spectral extraction step.

        Sets defaults according to observation parameters in
        base header.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.base_header is not None:
            # set to standard for extended or high-low
            if self.unfittable() or self.is_sky_spec():
                self.current[step_index].set_value(&#39;method&#39;, &#39;standard&#39;)
            else:
                restore = self.default[&#39;extract_spectra&#39;].get_value(&#39;method&#39;)
                self.current[step_index].set_value(&#39;method&#39;, restore)</div>
</div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right"> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2024, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.2.6. &nbsp;
    Last built 05 Feb 2024. <br/>
  </p>
</footer>
  </body>
</html>