<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>synchronize_gains &#8212; sofia_redux v1.3.4.dev38+g92ea2f4</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=6aa39468"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="prepare_frame_temp_fields" href="sofia_redux.scan.signal.signal_numba_functions.prepare_frame_temp_fields.html" />
    <link rel="prev" title="get_robust_gain_increment" href="sofia_redux.scan.signal.signal_numba_functions.get_robust_gain_increment.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://irsa.ipac.caltech.edu/Missions/sofia.html"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.scan.signal.signal_numba_functions.prepare_frame_temp_fields.html" title="prepare_frame_temp_fields">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.scan.signal.signal_numba_functions.get_robust_gain_increment.html" title="get_robust_gain_increment">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev38+g92ea2f4</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../sofia_redux/scan/index.html" accesskey="U">sofia_redux.scan: Scan Mode Algorithms for SOFIA Pipelines</a> &#187;</li>
      
      <li>synchronize_gains</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="synchronize-gains">
<h1>synchronize_gains<a class="headerlink" href="#synchronize-gains" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="sofia_redux.scan.signal.signal_numba_functions.synchronize_gains">
<span class="sig-prename descclassname"><span class="pre">sofia_redux.scan.signal.signal_numba_functions.</span></span><span class="sig-name descname"><span class="pre">synchronize_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_flags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_valid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modeling_frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel_indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_gains</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_wc2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel_wc2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_parms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel_parms</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/signal/signal_numba_functions.html#synchronize_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.signal.signal_numba_functions.synchronize_gains" title="Link to this definition">¶</a></dt>
<dd><p>Resync the frame data with the gain deltas and update dependents.</p>
<p>The supplied frame data (d) are decremented by:</p>
<blockquote>
<div><p>d -= delta_g * c</p>
</div></blockquote>
<p>where delta_g are the gain deltas and c are the signal values.  Dependents
are incremented via:</p>
<blockquote>
<div><p>frame_dependents += sum_{channels}(frame_wc2 / channel_wc2)
channel_dependents += (1 - 1/n)</p>
</div></blockquote>
<p>where n are the number of channels with channel_wc2 &gt; 0 (i.e., one gain
parameter per channel minus the overall gain renormalization).  The frame
and channel wc2 values are the current accumulated gain weights in the
frame and channel planes (increments are calculated by
<a class="reference internal" href="sofia_redux.scan.signal.signal_numba_functions.get_ml_gain_increment.html#sofia_redux.scan.signal.signal_numba_functions.get_ml_gain_increment" title="sofia_redux.scan.signal.signal_numba_functions.get_ml_gain_increment"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_ml_gain_increment()</span></code></a> and <a class="reference internal" href="sofia_redux.scan.signal.signal_numba_functions.get_robust_gain_increment.html#sofia_redux.scan.signal.signal_numba_functions.get_robust_gain_increment" title="sofia_redux.scan.signal.signal_numba_functions.get_robust_gain_increment"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_robust_gain_increment()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>frame_data</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The frame data of shape (n_frames, all_channels).  Will be updated
in-place.</p>
</dd>
<dt><strong>sample_flags</strong><span class="classifier">numpy.ndarray (int)</span></dt><dd><p>Sample flags of shape (n_frames, all_channels) where any non-zero
value excludes a sample (frame data) from certain calculations.
In this case, frame data will always be updated, but dependents
will not for a non-zero sample flag.</p>
</dd>
<dt><strong>frame_valid</strong><span class="classifier">numpy.ndarray (bool)</span></dt><dd><p>A boolean mask of shape (n_frames,) where <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> excludes a frame
from all calculations.</p>
</dd>
<dt><strong>modeling_frames</strong><span class="classifier">numpy.ndarray (bool)</span></dt><dd><p>A boolean mask of shape (n_frames,) where <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> indicates that a
frame is a modeling frame for which dependents should not be
updated.</p>
</dd>
<dt><strong>channel_indices</strong><span class="classifier">numpy.ndarray (int)</span></dt><dd><p>The indices of the channel group for the signal mode.  Used to map
n_channels onto all_channels.</p>
</dd>
<dt><strong>delta_gains</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The change in the gains of shape (n_channels,).  For zero deltas,
no change needs to be made.</p>
</dd>
<dt><strong>frame_wc2</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The frame signal gain weights of shape (n_frames,).</p>
</dd>
<dt><strong>channel_wc2</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The channel signal gain weights of shape (n_channels,).</p>
</dd>
<dt><strong>signal_values</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The frame signal gain values of shape (n_frames,).</p>
</dd>
<dt><strong>frame_parms</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The frame dependents of shape (n_frames,).  Updated in-place.</p>
</dd>
<dt><strong>channel_parms</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The channel dependents of shape (all_channels,).  Updated in-place</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">synchronize_gains</a><ul>
<li><a class="reference internal" href="#sofia_redux.scan.signal.signal_numba_functions.synchronize_gains"><code class="docutils literal notranslate"><span class="pre">synchronize_gains()</span></code></a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.scan.signal.signal_numba_functions.synchronize_gains.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2024, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.2.6. &nbsp;
    Last built 05 Feb 2024. <br/>
  </p>
</footer>
  </body>
</html>