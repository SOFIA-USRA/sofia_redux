<!DOCTYPE html>

<html lang="en" data-content_root="../../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sofia_redux.pipeline.sofia.parameters.flitecam_spatcal_parameters &#8212; sofia_redux v1.3.4.dev38+g92ea2f4</title>
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/plot_directive.css" />
    
    <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../../../_static/documentation_options.js?v=6aa39468"></script>
    <script src="../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../../../../../_static/sidebar.js"></script>
    <script type="text/javascript" src="../../../../../_static/copybutton.js"></script>
    <link rel="icon" href="../../../../../_static/redux.ico"/>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../../../../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://irsa.ipac.caltech.edu/Missions/sofia.html"></a></li>
    <li><a title="General Index" href="../../../../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../../../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../../../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="../../../../../index.html">sofia_redux v1.3.4.dev38+g92ea2f4</a>
	 &#187;
      </li>
      <li><a href="../../../../index.html" accesskey="U">Module code</a> &#187;</li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sofia_redux.pipeline.sofia.parameters.flitecam_spatcal_parameters</h1><div class="highlight"><pre>
<span></span># Licensed under a 3-clause BSD style license - see LICENSE.rst
&quot;&quot;&quot;FLITECAM parameter sets.&quot;&quot;&quot;

from sofia_redux.pipeline.sofia.parameters.flitecam_parameters import DEFAULT
from sofia_redux.pipeline.sofia.parameters.flitecam_spectroscopy_parameters \
    import SPECTRAL_DEFAULT
from sofia_redux.pipeline.sofia.parameters.flitecam_wavecal_parameters \
    import FLITECAMWavecalParameters, WAVECAL_DEFAULT

__all__ = [&#39;FLITECAMSpatcalParameters&#39;]


SPATCAL_DEFAULT = {
    &#39;trace_continuum&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;attach_trace_xy&#39;,
         &#39;name&#39;: &#39;Attach trace positions table&#39;,
         &#39;hidden&#39;: True,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, trace x/y positions will be attached\n&#39;
                        &#39;in an additional extension.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Trace method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;fix to aperture position&#39;, &#39;fit to continuum&#39;],
         &#39;option_index&#39;: 1,
         &#39;description&#39;: &#39;Select the trace method.&#39;},
        {&#39;key&#39;: &#39;fit_order&#39;,
         &#39;name&#39;: &#39;Trace fit order&#39;,
         &#39;value&#39;: 2,
         &#39;description&#39;: &#39;Polynomial fit order for aperture center &#39;
                        &#39;(along spectral dimension).&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;fit_thresh&#39;,
         &#39;name&#39;: &#39;Trace fit threshold&#39;,
         &#39;value&#39;: 4.0,
         &#39;description&#39;: &#39;Robust rejection threshold, in sigma.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;step_size&#39;,
         &#39;name&#39;: &#39;Fit position step size (pixels)&#39;,
         &#39;value&#39;: 7,
         &#39;description&#39;: &#39;Step size along trace for fitting locations.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;fit_traces&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;x_fit_order&#39;,
         &#39;name&#39;: &#39;Fit order for X (wavelength)&#39;,
         &#39;value&#39;: 2,
         &#39;description&#39;: &#39;Wavelength order for surface fit&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;y_fit_order&#39;,
         &#39;name&#39;: &#39;Fit order for Y (slit position)&#39;,
         &#39;value&#39;: 1,
         &#39;description&#39;: &#39;Spatial order for surface fit&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;weighted&#39;,
         &#39;name&#39;: &#39;Weight by profile height&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Fit to traces will be weighted by profile height.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;wavefile&#39;,
         &#39;name&#39;: &#39;Wavelength calibration file&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing coordinate calibration data&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
        {&#39;key&#39;: &#39;rotation&#39;,
         &#39;hidden&#39;: True,
         &#39;name&#39;: &#39;Rotation code for storing wavecal file&#39;,
         &#39;value&#39;: 1,
         &#39;description&#39;: &#39;FLITECAM uses a 90 degree rotation for &#39;
                        &#39;calibration files.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
}


<div class="viewcode-block" id="FLITECAMSpatcalParameters">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.flitecam_spatcal_parameters.FLITECAMSpatcalParameters.html#sofia_redux.pipeline.sofia.parameters.flitecam_spatcal_parameters.FLITECAMSpatcalParameters">[docs]</a>
class FLITECAMSpatcalParameters(FLITECAMWavecalParameters):
    &quot;&quot;&quot;Reduction parameters for the FLITECAM grism spatcal pipeline.&quot;&quot;&quot;
    def __init__(self, default=None, config=None,
                 pipecal_config=None):
        &quot;&quot;&quot;
        Initialize parameters with default values.

        The various config files are used to override certain
        parameter defaults for particular observation modes,
        or dates, etc.

        Parameters
        ----------
        config : dict-like, optional
            Reduction mode and auxiliary file configuration mapping,
            as returned from the sofia_redux.instruments.flitecam
            `getcalpath` function.
        pipecal_config : dict-like, optional
            DRIP configuration, as loaded by the
            sofia_redux.instruments.flitecam `configuration` function.
        &quot;&quot;&quot;
        if default is None:
            default = DEFAULT.copy()
            default.update(SPECTRAL_DEFAULT)
            default.update(WAVECAL_DEFAULT)
            default.update(SPATCAL_DEFAULT)

        super().__init__(default=default,
                         config=config,
                         pipecal_config=pipecal_config)

<div class="viewcode-block" id="FLITECAMSpatcalParameters.to_config">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.flitecam_spatcal_parameters.FLITECAMSpatcalParameters.html#sofia_redux.pipeline.sofia.parameters.flitecam_spatcal_parameters.FLITECAMSpatcalParameters.to_config">[docs]</a>
    def to_config(self):
        &quot;&quot;&quot;
        Read parameter values into a configuration object.

        Section names in the output object are written as
        ``stepindex: stepname`` in order to record the order of
        reduction steps, and to keep any repeated step names uniquely
        identified.  Only the current parameter values are recorded.
        Other information, such as data or widget type or default
        values, is lost.

        Overrides parent function in order to add a spatcal = True
        flag to the top-level configuration.

        Returns
        -------
        ConfigObj
            The parameter values in a `configobj.ConfigObj` object.
        &quot;&quot;&quot;
        config = super().to_config()
        # add spatcal parameter
        config[&#39;wavecal&#39;] = False
        config[&#39;spatcal&#39;] = True
        config[&#39;slitcorr&#39;] = False
        return config</div>


<div class="viewcode-block" id="FLITECAMSpatcalParameters.fit_traces">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.flitecam_spatcal_parameters.FLITECAMSpatcalParameters.html#sofia_redux.pipeline.sofia.parameters.flitecam_spatcal_parameters.FLITECAMSpatcalParameters.fit_traces">[docs]</a>
    def fit_traces(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the fitting step.

        Sets default wavefile according to `config`.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.config is not None:
            # set default wave file from cal config
            if &#39;wavefile&#39; in self.config:
                self.current[step_index].set_value(
                    &#39;wavefile&#39;, self.config[&#39;wavefile&#39;])</div>
</div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right"> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2024, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.2.6. &nbsp;
    Last built 05 Feb 2024. <br/>
  </p>
</footer>
  </body>
</html>