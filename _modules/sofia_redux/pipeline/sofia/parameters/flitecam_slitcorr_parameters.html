<!DOCTYPE html>

<html lang="en" data-content_root="../../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters &#8212; sofia_redux v1.3.4.dev38+g92ea2f4</title>
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/plot_directive.css" />
    
    <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../../../_static/documentation_options.js?v=6aa39468"></script>
    <script src="../../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../../../../../_static/sidebar.js"></script>
    <script type="text/javascript" src="../../../../../_static/copybutton.js"></script>
    <link rel="icon" href="../../../../../_static/redux.ico"/>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../../../../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://irsa.ipac.caltech.edu/Missions/sofia.html"></a></li>
    <li><a title="General Index" href="../../../../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../../../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../../../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="../../../../../index.html">sofia_redux v1.3.4.dev38+g92ea2f4</a>
	 &#187;
      </li>
      <li><a href="../../../../index.html" accesskey="U">Module code</a> &#187;</li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters</h1><div class="highlight"><pre>
<span></span># Licensed under a 3-clause BSD style license - see LICENSE.rst
&quot;&quot;&quot;FLITECAM parameter sets.&quot;&quot;&quot;

from sofia_redux.pipeline.sofia.parameters.flitecam_parameters import DEFAULT
from sofia_redux.pipeline.sofia.parameters.flitecam_spectroscopy_parameters \
    import SPECTRAL_DEFAULT, FLITECAMSpectroscopyParameters

__all__ = [&#39;FLITECAMSlitcorrParameters&#39;]


SLITCORR_DEFAULT = {
    &#39;make_image&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;pair_sub&#39;,
         &#39;name&#39;: &#39;Subtract pairs&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, pairs of files are subtracted.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;flatfile&#39;,
         &#39;name&#39;: &#39;Flat file&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing a flat to divide into the &#39;
                        &#39;data.  Set to empty string to skip flat division.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
    ],
    &#39;stack_dithers&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;skip_stack&#39;,
         &#39;name&#39;: &#39;Skip dither stacking&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Set to skip stacking input files &#39;
                        &#39;and propagate separate images instead.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;ignore_dither&#39;,
         &#39;name&#39;: &#39;Ignore dither information from header&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Set to ignore dither information &#39;
                        &#39;and stack all input.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Combination method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;mean&#39;, &#39;median&#39;, &#39;sum&#39;],
         &#39;option_index&#39;: 0,
         &#39;description&#39;: &#39;Select the combination method.&#39;},
        {&#39;key&#39;: &#39;weighted&#39;,
         &#39;name&#39;: &#39;Use weighted mean&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, the average of the data will be &#39;
                        &#39;weighted by the variance.\n&#39;
                        &#39;Ignored for method=median.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;robust&#39;,
         &#39;name&#39;: &#39;Robust combination&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;If set, data will be sigma-clipped &#39;
                        &#39;before combination&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;threshold&#39;,
         &#39;name&#39;: &#39;Outlier rejection threshold (sigma)&#39;,
         &#39;value&#39;: 8.0,
         &#39;description&#39;: &#39;Specify the number of sigma to use in &#39;
                        &#39;sigma clip for robust algorithms.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;maxiters&#39;,
         &#39;name&#39;: &#39;Maximum sigma-clipping iterations&#39;,
         &#39;value&#39;: 5,
         &#39;description&#39;: &#39;Specify the maximum number of outlier &#39;
                        &#39;rejection iterations to use if robust=True.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;make_profiles&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;wavefile&#39;,
         &#39;name&#39;: &#39;Wave/space calibration file&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing coordinate calibration data&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
        {&#39;key&#39;: &#39;slitfile&#39;,
         &#39;hidden&#39;: True,
         &#39;name&#39;: &#39;Slit correction file&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;FITS file containing slit correction data&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;pick_file&#39;},
        {&#39;key&#39;: &#39;fit_order&#39;,
         &#39;name&#39;: &#39;Row fit order&#39;,
         &#39;value&#39;: 3,
         &#39;description&#39;: &#39;Polynomial fit order for rows &#39;
                        &#39;(along spectral dimension).&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;bg_sub&#39;,
         &#39;name&#39;: &#39;Subtract median background&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, the median value along columns will &#39;
                        &#39;be subtracted from the profile.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;atmosthresh&#39;,
         &#39;name&#39;: &#39;Atmospheric transmission threshold&#39;,
         &#39;value&#39;: 0.0,
         &#39;description&#39;: &#39;Transmission values below this threshold are not &#39;
                        &#39;considered when making the spatial profile.\n&#39;
                        &#39;Values are 0-1.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;simwavecal&#39;,
         &#39;name&#39;: &#39;Simulate calibrations&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, the data will not be rectified or &#39;
                        &#39;calibrated.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;testwavecal&#39;,
         &#39;hidden&#39;: True,
         &#39;name&#39;: &#39;Test new calibrations&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;If set, WAVECAL and SPATCAL extensions will be used &#39;
                        &#39;for rectification.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
    ],
    &#39;locate_apertures&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;hidden&#39;: True,
         &#39;name&#39;: &#39;Aperture location method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;auto&#39;, &#39;fix to input&#39;, &#39;fix to center&#39;, &#39;step up slit&#39;],
         &#39;option_index&#39;: 3,
         &#39;description&#39;: &#39;Select the aperture location method.&#39;},
        {&#39;key&#39;: &#39;num_aps&#39;,
         &#39;name&#39;: &#39;Number of apertures&#39;,
         &#39;value&#39;: 30,
         &#39;description&#39;: &#39;Number of apertures to step up the slit.&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;input_position&#39;,
         &#39;hidden&#39;: True,
         &#39;name&#39;: &#39;Aperture position&#39;,
         &#39;value&#39;: &#39;&#39;,
         &#39;description&#39;: &#39;Starting position(s) for aperture detection, &#39;
                        &#39;comma-separated for apertures, semi-colon &#39;
                        &#39;separated for files.\n&#39;
                        &#39;If method is &quot;fix to input&quot;, will be used &#39;
                        &#39;directly.&#39;,
         &#39;dtype&#39;: &#39;str&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;fwhm&#39;,
         &#39;hidden&#39;: True,
         &#39;name&#39;: &#39;Expected aperture FWHM (arcsec)&#39;,
         &#39;value&#39;: 3.0,
         &#39;description&#39;: &#39;Gaussian FWHM estimate for fit to profile.&#39;,
         &#39;dtype&#39;: &#39;float&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
    &#39;extract_median_spectra&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;save_1d&#39;,
         &#39;name&#39;: &#39;Save extracted 1D spectra&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save spectra to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
    ],
    &#39;normalize&#39;: [
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;save_1d&#39;,
         &#39;name&#39;: &#39;Save extracted 1D spectra&#39;,
         &#39;value&#39;: False,
         &#39;description&#39;: &#39;Save spectra to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
    ],
    &#39;make_slitcorr&#39;: [
        {&#39;key&#39;: &#39;general_params&#39;,
         &#39;name&#39;: &#39;General Parameters&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;save&#39;,
         &#39;name&#39;: &#39;Save output&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Save output data to disk&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;method&#39;,
         &#39;name&#39;: &#39;Fit method&#39;,
         &#39;wtype&#39;: &#39;combo_box&#39;,
         &#39;options&#39;: [&#39;1D&#39;, &#39;2D&#39;],
         &#39;option_index&#39;: 1,
         &#39;description&#39;: &#39;Select the fit method.&#39;},
        {&#39;key&#39;: &#39;weighted&#39;,
         &#39;name&#39;: &#39;Weight by spectral error&#39;,
         &#39;value&#39;: True,
         &#39;description&#39;: &#39;Fit to median spectra will be weighted by errors.&#39;,
         &#39;dtype&#39;: &#39;bool&#39;,
         &#39;wtype&#39;: &#39;check_box&#39;},
        {&#39;key&#39;: &#39;2d_params&#39;,
         &#39;name&#39;: &#39;Parameters for 2D fit&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;x_fit_order&#39;,
         &#39;name&#39;: &#39;Fit order for X (wavelength)&#39;,
         &#39;value&#39;: 3,
         &#39;description&#39;: &#39;Wavelength order for surface fit&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;y_fit_order&#39;,
         &#39;name&#39;: &#39;Fit order for Y (slit position)&#39;,
         &#39;value&#39;: 2,
         &#39;description&#39;: &#39;Spatial order for surface fit&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;1d_params&#39;,
         &#39;name&#39;: &#39;Parameters for 1D fit&#39;,
         &#39;wtype&#39;: &#39;group&#39;},
        {&#39;key&#39;: &#39;y_fit_order_1d&#39;,
         &#39;name&#39;: &#39;Fit order for Y (slit position)&#39;,
         &#39;value&#39;: 2,
         &#39;description&#39;: &#39;Spatial order for surface fit&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
        {&#39;key&#39;: &#39;x_width&#39;,
         &#39;name&#39;: &#39;Smoothing window for X (pixels)&#39;,
         &#39;value&#39;: 10,
         &#39;description&#39;: &#39;Boxcar width for smoothing fit in X-direction&#39;,
         &#39;dtype&#39;: &#39;int&#39;,
         &#39;wtype&#39;: &#39;text_box&#39;},
    ],
}


<div class="viewcode-block" id="FLITECAMSlitcorrParameters">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters.FLITECAMSlitcorrParameters.html#sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters.FLITECAMSlitcorrParameters">[docs]</a>
class FLITECAMSlitcorrParameters(FLITECAMSpectroscopyParameters):
    &quot;&quot;&quot;Reduction parameters for the FLITECAM grism slitcorr pipeline.&quot;&quot;&quot;
    def __init__(self, default=None, config=None,
                 pipecal_config=None):
        &quot;&quot;&quot;
        Initialize parameters with default values.

        The various config files are used to override certain
        parameter defaults for particular observation modes,
        or dates, etc.

        Parameters
        ----------
        config : dict-like, optional
            Reduction mode and auxiliary file configuration mapping,
            as returned from the sofia_redux.instruments.flitecam
            `getcalpath` function.
        pipecal_config : dict-like, optional
            Flux calibration and atmospheric correction configuration,
            as returned from the pipecal `pipecal_config` function.
        &quot;&quot;&quot;
        if default is None:
            default = DEFAULT.copy()
            default.update(SPECTRAL_DEFAULT)
            default.update(SLITCORR_DEFAULT)

        super().__init__(default=default,
                         config=config,
                         pipecal_config=pipecal_config)

<div class="viewcode-block" id="FLITECAMSlitcorrParameters.to_config">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters.FLITECAMSlitcorrParameters.html#sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters.FLITECAMSlitcorrParameters.to_config">[docs]</a>
    def to_config(self):
        &quot;&quot;&quot;
        Read parameter values into a configuration object.

        Section names in the output object are written as
        ``stepindex: stepname`` in order to record the order of
        reduction steps, and to keep any repeated step names uniquely
        identified.  Only the current parameter values are recorded.
        Other information, such as data or widget type or default
        values, is lost.

        Overrides parent function in order to add a slitcorr = True
        flag to the top-level configuration.

        Returns
        -------
        ConfigObj
            The parameter values in a `configobj.ConfigObj` object.
        &quot;&quot;&quot;
        config = super().to_config()
        # add slitcorr parameter
        config[&#39;wavecal&#39;] = False
        config[&#39;spatcal&#39;] = False
        config[&#39;slitcorr&#39;] = True
        return config</div>


<div class="viewcode-block" id="FLITECAMSlitcorrParameters.make_profiles">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters.FLITECAMSlitcorrParameters.html#sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters.FLITECAMSlitcorrParameters.make_profiles">[docs]</a>
    def make_profiles(self, step_index):
        &quot;&quot;&quot;
        Modify parameters for the profile step.

        Sets default wavefile according to `config`.

        Parameters
        ----------
        step_index : int
            Reduction recipe index for the step.
        &quot;&quot;&quot;
        if self.config is not None:
            # set default wave and slit file from cal config
            if &#39;wavefile&#39; in self.config:
                self.current[step_index].set_value(
                    &#39;wavefile&#39;, self.config[&#39;wavefile&#39;])</div>


<div class="viewcode-block" id="FLITECAMSlitcorrParameters.locate_apertures">
<a class="viewcode-back" href="../../../../../api/sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters.FLITECAMSlitcorrParameters.html#sofia_redux.pipeline.sofia.parameters.flitecam_slitcorr_parameters.FLITECAMSlitcorrParameters.locate_apertures">[docs]</a>
    def locate_apertures(self, step_index):
        &quot;&quot;&quot;Override parent behavior to do nothing.&quot;&quot;&quot;
        pass</div>
</div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right"> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2024, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.2.6. &nbsp;
    Last built 05 Feb 2024. <br/>
  </p>
</footer>
  </body>
</html>