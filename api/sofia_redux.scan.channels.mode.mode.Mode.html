<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Mode &#8212; sofia_redux v1.3.4.dev38+g92ea2f4</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sofia.css?v=3fe2c07e" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=6aa39468"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/redux.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuration" href="sofia_redux.scan.configuration.configuration.Configuration.html" />
    <link rel="prev" title="Modality" href="sofia_redux.scan.channels.modality.modality.Modality.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">SOFIA</span><span id="logotext2">Redux</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="SOFIA Homepage" href="https://irsa.ipac.caltech.edu/Missions/sofia.html"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sofia_redux.scan.configuration.configuration.Configuration.html" title="Configuration">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="sofia_redux.scan.channels.modality.modality.Modality.html" title="Modality">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">sofia_redux v1.3.4.dev38+g92ea2f4</a>
	 &#187;
      </li>
      <li><a href="../sofia_redux/index.html" >SOFIA Redux</a> &#187;</li>
      <li><a href="../manuals/hawc/developers/developers.html" accesskey="U">HAWC+ DRP Developer’s Manual</a> &#187;</li>
      
      <li>Mode</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="mode">
<h1>Mode<a class="headerlink" href="#mode" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sofia_redux.scan.channels.mode.mode.</span></span><span class="sig-name descname"><span class="pre">Mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain_provider</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a></p>
<p>Create a mode operating on a given channel group.</p>
<p>A mode is an object that is applied to a given channel group, defining
what constitutes its “gain” and how to operate thereon.  This is
also dependent on a gain provider.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>channel_group</strong><span class="classifier">ChannelGroup, optional</span></dt><dd><p>The channel group owned by the mode.</p>
</dd>
<dt><strong>gain_provider</strong><span class="classifier">str or GainProvider, optional</span></dt><dd><p>If a string is provided a <code class="xref py py-obj docutils literal notranslate"><span class="pre">FieldGainProvider</span></code> will be set to
operate on the given field of the channel group.</p>
</dd>
<dt><strong>name</strong><span class="classifier">str, optional</span></dt><dd><p>The name of the mode.  If not provided, will be determined from the
channel group name (if available).</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Attributes Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.flagspace" title="sofia_redux.scan.channels.mode.mode.Mode.flagspace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flagspace</span></code></a></p></td>
<td><p>Return the flagspace for the mode channel group.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.size" title="sofia_redux.scan.channels.mode.mode.Mode.size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">size</span></code></a></p></td>
<td><p>Return the size of the channel group.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.add_coupled_mode" title="sofia_redux.scan.channels.mode.mode.Mode.add_coupled_mode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_coupled_mode</span></code></a>(coupled_mode)</p></td>
<td><p>Add a coupled mode to the available coupled modes of the mode.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.apply_provider_gains" title="sofia_redux.scan.channels.mode.mode.Mode.apply_provider_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_provider_gains</span></code></a>(validate)</p></td>
<td><p>Sets the internal gain values as returned by the gain provider.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.derive_gains" title="sofia_redux.scan.channels.mode.mode.Mode.derive_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">derive_gains</span></code></a>(integration[, robust])</p></td>
<td><p>Return gains and weights derived from an integration.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.flag_gains" title="sofia_redux.scan.channels.mode.mode.Mode.flag_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_gains</span></code></a>(normalize)</p></td>
<td><p>Flag gain values and propagate back to channel group.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.get_frame_resolution" title="sofia_redux.scan.channels.mode.mode.Mode.get_frame_resolution"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_frame_resolution</span></code></a>(integration)</p></td>
<td><p>Returns the integration frame resolution.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.get_gains" title="sofia_redux.scan.channels.mode.mode.Mode.get_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_gains</span></code></a>([validate])</p></td>
<td><p>Return the gain values of the mode.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.set_channel_group" title="sofia_redux.scan.channels.mode.mode.Mode.set_channel_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_channel_group</span></code></a>(channel_group)</p></td>
<td><p>Apply a channel group to the mode.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.set_gain_provider" title="sofia_redux.scan.channels.mode.mode.Mode.set_gain_provider"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_gain_provider</span></code></a>(gain_provider)</p></td>
<td><p>Set the gain provider that operates on the channel group.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.set_gains" title="sofia_redux.scan.channels.mode.mode.Mode.set_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_gains</span></code></a>(gain[, flag_normalized])</p></td>
<td><p>Set the gain values of the mode.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.set_name" title="sofia_redux.scan.channels.mode.mode.Mode.set_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_name</span></code></a>([name])</p></td>
<td><p>Set the name of the mode.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.signal_length" title="sofia_redux.scan.channels.mode.mode.Mode.signal_length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">signal_length</span></code></a>(integration)</p></td>
<td><p>Return the length of signal in terms of integration frame resolution.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.sync_all_gains" title="sofia_redux.scan.channels.mode.mode.Mode.sync_all_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sync_all_gains</span></code></a>(integration, sum_wc2[, ...])</p></td>
<td><p>Synchronize all gains in the mode.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.to_string" title="sofia_redux.scan.channels.mode.mode.Mode.to_string"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_string</span></code></a>()</p></td>
<td><p>Returns a long description of channels in the mode.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.uniform_gains" title="sofia_redux.scan.channels.mode.mode.Mode.uniform_gains"><code class="xref py py-obj docutils literal notranslate"><span class="pre">uniform_gains</span></code></a>()</p></td>
<td><p>Sets all gains to unity.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes Documentation</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.flagspace">
<span class="sig-name descname"><span class="pre">flagspace</span></span><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.flagspace" title="Link to this definition">¶</a></dt>
<dd><p>Return the flagspace for the mode channel group.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>Flags</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.size">
<span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.size" title="Link to this definition">¶</a></dt>
<dd><p>Return the size of the channel group.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>int</dt><dd><p>The number of channels owned by the channel group.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.add_coupled_mode">
<span class="sig-name descname"><span class="pre">add_coupled_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coupled_mode</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.add_coupled_mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.add_coupled_mode" title="Link to this definition">¶</a></dt>
<dd><p>Add a coupled mode to the available coupled modes of the mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>coupled_mode</strong><span class="classifier">CoupledMode</span></dt><dd><p>A coupled mode to append to the contained coupled modes of mode.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.apply_provider_gains">
<span class="sig-name descname"><span class="pre">apply_provider_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.apply_provider_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.apply_provider_gains" title="Link to this definition">¶</a></dt>
<dd><p>Sets the internal gain values as returned by the gain provider.</p>
<p>Any NaN gain values will be replaced by zeros.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>validate</strong><span class="classifier">bool</span></dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, causes the gain provider to “validate” the mode.  This
could mean anything, but is usually used to update internal
gain provider settings.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.derive_gains">
<span class="sig-name descname"><span class="pre">derive_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">robust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.derive_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.derive_gains" title="Link to this definition">¶</a></dt>
<dd><p>Return gains and weights derived from an integration.</p>
<p>The returned values are the integration gains plus the mode gains.
Weights are determined from only the integration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>integration</strong><span class="classifier">Integration</span></dt><dd></dd>
<dt><strong>robust</strong><span class="classifier">bool, optional</span></dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, derives the gain increment from the integration using
the “robust” definition.  This is only applicable if the
integration is not phase modulated.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>gains, weights</strong><span class="classifier">numpy.ndarray (float), numpy.ndarray (float)</span></dt><dd><p>The gains and weights derived from the integration and mode.  Note
that all non-finite values are reset to zero weight and zero value.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.flag_gains">
<span class="sig-name descname"><span class="pre">flag_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">normalize</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.flag_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.flag_gains" title="Link to this definition">¶</a></dt>
<dd><p>Flag gain values and propagate back to channel group.</p>
<p>Gains that are outside of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">gain_range</span></code> attribute range are flagged
as the specified gain flag in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">gain_flag</span></code> attribute.  Note that
previously flagged channels may be unflagged if in-range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>normalize</strong><span class="classifier">bool</span></dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, before checking if the gain values are within the
allowable gain range, normalize with respect to the average
gain of those channels previously flagged.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>flagging</strong><span class="classifier">bool</span></dt><dd><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if gains were checked for flagging and <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> otherwise.
Note that this does not necessarily mean any flags were actually
updated.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.get_frame_resolution">
<span class="sig-name descname"><span class="pre">get_frame_resolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.get_frame_resolution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.get_frame_resolution" title="Link to this definition">¶</a></dt>
<dd><p>Returns the integration frame resolution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>integration</strong><span class="classifier">Integration</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>resolution</strong><span class="classifier">int</span></dt><dd><p>The integration frame resolution.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.get_gains">
<span class="sig-name descname"><span class="pre">get_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.get_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.get_gains" title="Link to this definition">¶</a></dt>
<dd><p>Return the gain values of the mode.</p>
<p>If no gains are available and no gain provider is available, will
return an array of ones.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>validate</strong><span class="classifier">bool, optional</span></dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> (default), will cause the gain provider to “validate”
the mode itself.  This could mean anything and is dependent on the
gain provider.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>gains</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The gain values.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.set_channel_group">
<span class="sig-name descname"><span class="pre">set_channel_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel_group</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.set_channel_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.set_channel_group" title="Link to this definition">¶</a></dt>
<dd><p>Apply a channel group to the mode.</p>
<p>During this phase the gain flag type is determined as the zeroth flag
of the channel group flagspace if previously undefined.  In addition,
the name of the mode will be set to the name of the channel group
if not previously defined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>channel_group</strong><span class="classifier">ChannelGroup</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.set_gain_provider">
<span class="sig-name descname"><span class="pre">set_gain_provider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gain_provider</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.set_gain_provider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.set_gain_provider" title="Link to this definition">¶</a></dt>
<dd><p>Set the gain provider that operates on the channel group.</p>
<p>The gain provider determines what attributes or fields of a channel
group will be defined as the gain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>gain_provider</strong><span class="classifier">str or GainProvider</span></dt><dd><p>If a string is provided, a FieldGainProvider will be created that
defines the gain as that field of the channel group data.
If a gain provider is explicitly provided, it will be used instead.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.set_gains">
<span class="sig-name descname"><span class="pre">set_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_normalized</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.set_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.set_gains" title="Link to this definition">¶</a></dt>
<dd><p>Set the gain values of the mode.</p>
<p>If a gain provider is available, it will be used to update the gain
values, which could also update values in the channel group.  Gains
may be flagged depending on whether a gain range has been set
(in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">gain_range</span></code> attribute).  Note that any flagging will back
propagate to the channel group and therefore, the channels themselves.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>gain</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>The new gain values to apply.</p>
</dd>
<dt><strong>flag_normalized</strong><span class="classifier">bool, optional</span></dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, will flag gain values outside the gain range after
normalizing to the average gain value of those previously flagged.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>flagging</strong><span class="classifier">bool</span></dt><dd><p>If gain flagging was performed.  This does not necessarily mean
any channels were flagged, just that it was attempted.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.set_name">
<span class="sig-name descname"><span class="pre">set_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.set_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.set_name" title="Link to this definition">¶</a></dt>
<dd><p>Set the name of the mode.</p>
<p>If not provided, the name will be determined from the channel group.
If no channel group is available, the name will not be set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str, optional</span></dt><dd><p>The new name of the mode.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.signal_length">
<span class="sig-name descname"><span class="pre">signal_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.signal_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.signal_length" title="Link to this definition">¶</a></dt>
<dd><p>Return the length of signal in terms of integration frame resolution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>integration</strong><span class="classifier">Integration</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>length</strong><span class="classifier">int</span></dt><dd><p>The length of the signal in terms of integration frame resolution.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.sync_all_gains">
<span class="sig-name descname"><span class="pre">sync_all_gains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sum_wc2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_temp_ready</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.sync_all_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.sync_all_gains" title="Link to this definition">¶</a></dt>
<dd><p>Synchronize all gains in the mode.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>integration</strong><span class="classifier">Integration</span></dt><dd></dd>
<dt><strong>sum_wc2</strong><span class="classifier">numpy.ndarray (float)</span></dt><dd><p>An array of channel gains of shape (n_channels,)</p>
</dd>
<dt><strong>is_temp_ready</strong><span class="classifier">bool, optional</span></dt><dd><p>Indicates whether the frame temporary values have already been
calculated.  These should contain:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>temp_c = signal_value
temp_wc = relative_weight * signal_value
temp_wc2 = relative_weight * signal_value^2
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.to_string">
<span class="sig-name descname"><span class="pre">to_string</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.to_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.to_string" title="Link to this definition">¶</a></dt>
<dd><p>Returns a long description of channels in the mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>description</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sofia_redux.scan.channels.mode.mode.Mode.uniform_gains">
<span class="sig-name descname"><span class="pre">uniform_gains</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sofia_redux/scan/channels/mode/mode.html#Mode.uniform_gains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sofia_redux.scan.channels.mode.mode.Mode.uniform_gains" title="Link to this definition">¶</a></dt>
<dd><p>Sets all gains to unity.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Mode</a><ul>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode"><code class="docutils literal notranslate"><span class="pre">Mode</span></code></a><ul>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.flagspace"><code class="docutils literal notranslate"><span class="pre">Mode.flagspace</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.size"><code class="docutils literal notranslate"><span class="pre">Mode.size</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.add_coupled_mode"><code class="docutils literal notranslate"><span class="pre">Mode.add_coupled_mode()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.apply_provider_gains"><code class="docutils literal notranslate"><span class="pre">Mode.apply_provider_gains()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.derive_gains"><code class="docutils literal notranslate"><span class="pre">Mode.derive_gains()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.flag_gains"><code class="docutils literal notranslate"><span class="pre">Mode.flag_gains()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.get_frame_resolution"><code class="docutils literal notranslate"><span class="pre">Mode.get_frame_resolution()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.get_gains"><code class="docutils literal notranslate"><span class="pre">Mode.get_gains()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.set_channel_group"><code class="docutils literal notranslate"><span class="pre">Mode.set_channel_group()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.set_gain_provider"><code class="docutils literal notranslate"><span class="pre">Mode.set_gain_provider()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.set_gains"><code class="docutils literal notranslate"><span class="pre">Mode.set_gains()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.set_name"><code class="docutils literal notranslate"><span class="pre">Mode.set_name()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.signal_length"><code class="docutils literal notranslate"><span class="pre">Mode.signal_length()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.sync_all_gains"><code class="docutils literal notranslate"><span class="pre">Mode.sync_all_gains()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.to_string"><code class="docutils literal notranslate"><span class="pre">Mode.to_string()</span></code></a></li>
<li><a class="reference internal" href="#sofia_redux.scan.channels.mode.mode.Mode.uniform_gains"><code class="docutils literal notranslate"><span class="pre">Mode.uniform_gains()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/sofia_redux.scan.channels.mode.mode.Mode.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2024, SOFIA-USRA.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.2.6. &nbsp;
    Last built 05 Feb 2024. <br/>
  </p>
</footer>
  </body>
</html>